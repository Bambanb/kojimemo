<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ãƒ¡ãƒ¢</title>
  <style>
    :root{
      --bg:#202124;
      --panel:#2b2d31;
      --panel2:#26282c;
      --text:#e8eaed;
      --muted:#a9adb6;
      --line:rgba(255,255,255,.08);
      --accent:#8ab4f8;
      --danger:#ff6b6b;
      --radius:16px;
    }
    *{box-sizing:border-box}

    /* æ›´æ–°ãƒ†ã‚¹ãƒˆ */
    
    body{
      margin:0;
      font-family:system-ui,-apple-system,"Segoe UI","Noto Sans JP",sans-serif;
      background:var(--bg);
      color:var(--text);
    }
    header{
      position:sticky;top:0;z-index:10;
      padding:14px 14px 10px;
      background:linear-gradient(to bottom, rgba(32,33,36,.96), rgba(32,33,36,.70));
      backdrop-filter: blur(10px);
      border-bottom:1px solid var(--line);
    }
    .row{display:flex;align-items:center;gap:10px}
    .between{justify-content:space-between}
    .title{
      font-weight:700;
      letter-spacing:.02em;
      font-size:18px;
    }
    .crumb{
      margin-top:6px;
      color:var(--muted);
      font-size:12px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .btn{
      border:1px solid var(--line);
      background:rgba(255,255,255,.04);
      color:var(--text);
      border-radius:14px;
      padding:10px 12px;
      font-weight:650;
      font-size:14px;
      line-height:1;
      user-select:none;
    }
    .btn:active{transform:translateY(1px)}
    .btn.accent{border-color:rgba(138,180,248,.35); background:rgba(138,180,248,.12); color:var(--accent)}
    .btn.danger{border-color:rgba(255,107,107,.35); background:rgba(255,107,107,.10); color:var(--danger)}
    .btn.icon{padding:10px 12px; min-width:44px; text-align:center}
    .pill{
      flex:1;
      display:flex; align-items:center; gap:8px;
      background:rgba(255,255,255,.04);
      border:1px solid var(--line);
      border-radius:16px;
      padding:10px 12px;
      min-width:0;
    }
    .pill input{
      width:100%;
      border:0; outline:0;
      background:transparent;
      color:var(--text);
      font-size:14px;
      min-width:0;
    }
    main{padding:12px 14px 80px}
    .panel{
      background:rgba(255,255,255,.03);
      border:1px solid var(--line);
      border-radius:var(--radius);
      padding:14px;
      margin:12px 0;
    }
    .panel h3{
      margin:0 0 10px;
      font-size:13px;
      color:var(--muted);
      font-weight:700;
      letter-spacing:.06em;
    }
    .item{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding:14px 14px;
      border-radius:14px;
      background:rgba(255,255,255,.03);
      border:1px solid var(--line);
      margin:10px 0;
    }
    .item:active{transform:translateY(1px)}
    .left{display:flex;align-items:center;gap:10px;min-width:0}
    .ico{font-size:16px; opacity:.9}
    .name{
      font-weight:700;
      font-size:15px;
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
      min-width:0;
    }
    .meta{
      display:flex;align-items:center;gap:10px;
      color:var(--muted);
      font-size:12px;
      flex-shrink:0;
    }
    .meta span{opacity:.9}
    .arrow{color:var(--muted); opacity:.7}
    .fab{
      position:fixed; right:16px; bottom:18px;
      display:flex; gap:10px;
      z-index:20;
    }
    .fab .btn{border-radius:18px; padding:12px 14px}
    /* editor */
    #editorView{
      position:fixed; inset:0;
      background:var(--bg);
      display:none;
      flex-direction:column;
      z-index:50;
    }
    #editorTop{
      position:sticky; top:0;
      padding:14px;
      border-bottom:1px solid var(--line);
      background:linear-gradient(to bottom, rgba(32,33,36,.98), rgba(32,33,36,.78));
      backdrop-filter: blur(10px);
    }
    #editorTop .small{color:var(--muted); font-size:12px}
    #titleInput{
      width:100%;
      margin-top:10px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.03);
      color:var(--text);
      border-radius:14px;
      padding:12px 12px;
      font-size:15px;
      outline:none;
      font-weight:700;
    }
    #bodyInput{
      flex:1;
      width:100%;
      border:0;
      outline:none;
      resize:none;
      background:transparent;
      color:var(--text);
      padding:14px;
      font-size:15px;
      line-height:1.7;
    }
    .spacer{height:8px}
    .hint{color:var(--muted); font-size:12px}
  </style>
</head>
<body>
  <header>
    <div class="row between">
      <div class="row" style="min-width:0">
        <button class="btn icon" id="backBtn" title="ä¸Šã¸">â†</button>
        <div style="min-width:0">
          <div class="title" id="headTitle" data-i18n="ãƒ›ãƒ¼ãƒ ">ãƒ›ãƒ¼ãƒ </div>
          <div class="crumb" id="breadcrumb">/</div>
        </div>
      </div>
    </div>

    <div class="spacer"></div>

    <div class="row">

<div class="row">
  <button class="btn icon" id="searchBtn" title="æ¤œç´¢">ğŸ”</button>
  <button class="btn icon" id="modeBtn" title="ãƒ¢ãƒ¼ãƒ‰åˆ‡æ›¿">å¾…</button>
</div>
      
      <div class="pill">
        <span class="ico">âœ</span>
        <input id="qInput" data-ph="ã‚¿ã‚¤ãƒˆãƒ«/æœ¬æ–‡ã®ä¸€éƒ¨ï¼ˆä»»æ„ï¼‰" placeholder="ã‚¿ã‚¤ãƒˆãƒ«/æœ¬æ–‡ã®ä¸€éƒ¨ï¼ˆä»»æ„ï¼‰" />
      </div>
      <button class="btn" id="renameFolderBtn" data-i18n="ãƒ•ã‚©ãƒ«ãƒ€åå¤‰æ›´">ãƒ•ã‚©ãƒ«ãƒ€åå¤‰æ›´</button>
<button class="btn danger" id="deleteFolderBtn" data-i18n="ãƒ•ã‚©ãƒ«ãƒ€å‰Šé™¤">ãƒ•ã‚©ãƒ«ãƒ€å‰Šé™¤</button>
    </div>
  </header>

<main>
  <div class="panel" id="foldersPanel">
    <h3>ãƒ•ã‚©ãƒ«ãƒ€</h3>
    <div id="foldersList"></div>
    <div class="hint" id="foldersEmpty" style="display:none;">ãƒ•ã‚©ãƒ«ãƒ€ãªã—</div>
  </div>

  <div class="panel" id="memosPanel">
    <h3>ãƒ¡ãƒ¢</h3>
    <div id="memosList"></div>
    <div class="hint" id="memosEmpty" style="display:none;">ãƒ¡ãƒ¢ãªã—</div>
  </div>
</main>

  <div class="fab">
    <button class="btn accent" id="addMemoBtn" data-i18n="ï¼‹ãƒ¡ãƒ¢">ï¼‹ãƒ¡ãƒ¢</button>
<button class="btn accent" id="addFolderBtn" data-i18n="ï¼‹ğŸ“">ï¼‹ğŸ“</button>
    
  </div>

  <!-- editor -->
  <div id="editorView">
    <div id="editorTop">
      <div class="row between">
        <button class="btn" id="closeEditorBtn">â†</button>

<div class="small" id="charCount" data-i18n="æ–‡å­—æ•°">æ–‡å­—æ•° 0</div>
<button class="btn accent" id="saveBtn" data-i18n="ä¿å­˜">ä¿å­˜</button>

<input id="titleInput" data-ph="ã‚¿ã‚¤ãƒˆãƒ«" placeholder="ã‚¿ã‚¤ãƒˆãƒ«" />
<textarea id="bodyInput" data-ph="ã“ã“ã«æœ¬æ–‡ã‚’æ›¸ãã€‚" placeholder="ã“ã“ã«æœ¬æ–‡ã‚’æ›¸ãã€‚"></textarea>
        
  </div>

<script>

  // å…¬é–‹ã™ã‚‹ãŸã³ã«ã“ã“ã ã‘æ•°å­—ã‚’å¤‰ãˆã‚‹ï¼ˆä¾‹: 20251215_01ï¼‰
  const APP_VERSION = "20251215_01";

  const url = new URL(location.href);
  const v = url.searchParams.get("v");

  if (v !== APP_VERSION) {
    url.searchParams.set("v", APP_VERSION);
    // å±¥æ­´ã‚’æ±šã•ãªã„ã§å·®ã—æ›¿ãˆâ†’èª­ã¿ç›´ã—
    location.replace(url.toString());
  }
</script>
<script>
  document.documentElement.insertAdjacentHTML(
  "afterbegin",
  `<div style="position:fixed;left:8px;top:8px;z-index:99999;
              padding:6px 10px;border-radius:10px;
              background:#ff0;color:#000;font-weight:800;">
     JS OK
   </div>`
);
window.onerror = function (msg, src, line, col) {
  document.body.insertAdjacentHTML(
    "afterbegin",
    `<pre style="position:fixed;left:8px;top:44px;z-index:99999;
                max-width:92vw;white-space:pre-wrap;
                padding:10px;border-radius:10px;
                background:#f33;color:#fff;">
JS ERROR:
${msg}
${line}:${col}
${src}
</pre>`
  );
};

  window.onerror = function (msg, src, line, col, err) {
  alert(`JSã‚¨ãƒ©ãƒ¼:\n${msg}\n${line}:${col}\n${src}`);
};
alert("JS èµ·å‹•OK");
  
/** ========= è¨­å®š ========= */
const CONFIG = {
  showMemosOnTop: true,   // â†ã€Œãƒ¡ãƒ¢ä¸€è¦§ã„ã‚‰ã‚“ã€ãªã‚‰ false ã«ã™ã‚‹ï¼ˆãƒ•ã‚©ãƒ«ãƒ€ã ã‘è¡¨ç¤ºï¼‰
  autosaveMs: 600,        // è‡ªå‹•ä¿å­˜é–“éš”
  storageKey: "memoTreeV2_notaUI"
};

/** ========= ãƒ‡ãƒ¼ã‚¿ =========
node = { folders:{name:node}, memos:{id:{id,title,text,updatedAt}} }
*/
function newNode(){ return { folders:{}, memos:{} }; }
function now(){ return Date.now(); }
function uid(){ return "m_" + Math.random().toString(36).slice(2) + "_" + now().toString(36); }

let root = load() || newNode();
let path = [];                 // ["çš‡é¢¯", "çŸ­ç·¨", ...]
let editingId = null;
let autosaveTimer = null;

const el = (id)=>document.getElementById(id);

function load(){
  try{
    const s = localStorage.getItem(CONFIG.storageKey);
    if(!s) return null;
    return JSON.parse(s);
  }catch(e){ return null; }
}
function persist(){
  try{
    localStorage.setItem(CONFIG.storageKey+"_bak", JSON.stringify(root));
    localStorage.setItem(CONFIG.storageKey, JSON.stringify(root));
  }catch(e){
    alert("ä¿å­˜ã§ãã¾ã›ã‚“ã§ã—ãŸï¼ˆã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ä¸Šé™ãªã©ï¼‰");
  }
}
function getNode(p = path){
  let node = root;
  for(const name of p){
    if(!node.folders[name]) node.folders[name] = newNode();
    node = node.folders[name];
  }
  return node;
}
function folderCharSum(node){
  let sum = 0;
  for(const id in node.memos){
    sum += (node.memos[id].text || "").length;
  }
  for(const fname in node.folders){
    sum += folderCharSum(node.folders[fname]);
  }
  return sum;
}

function setCrumb(){
  el("headTitle").textContent = path.length ? path[path.length-1] : "ãƒ›ãƒ¼ãƒ ";
  el("breadcrumb").textContent = "/" + path.join("/");
  el("backBtn").disabled = path.length === 0;
}

function render(){
  setCrumb();
  const node = getNode();
  const q = (el("qInput").value || "").trim().toLowerCase();

  // folders
  const folders = Object.keys(node.folders).sort((a,b)=>a.localeCompare(b,"ja"));
  const foldersList = el("foldersList");
  foldersList.innerHTML = "";
  let folderShown = 0;
  for(const name of folders){
    // search filter: if q exists, folder is shown if anything inside matches (cheap: always show folders when q empty)
    if(q){
      // quick check: if folder has memos containing q in title/text
      const sub = node.folders[name];
      const hit = hasHitInFolder(sub, q);
      if(!hit) continue;
    }
    folderShown++;

    const sub = node.folders[name];
    const memoCount = Object.keys(sub.memos).length;
    const charSum = folderCharSum(sub);

    const div = document.createElement("div");
    div.className = "item";
    div.innerHTML = `
      <div class="left" style="min-width:0">
        <div class="ico">ğŸ“</div>
        <div class="name" title="${escapeHtml(name)}">${escapeHtml(name)}</div>
      </div>
      <div class="meta">
      <span>${t("æ–‡å­—æ•°")} ${charSum}</span>
        <span>ğŸ“ ${memoCount}</span>
        <span>æ–‡å­— ${charSum}</span>
        <span class="arrow">â€º</span>
      </div>
    `;
    div.addEventListener("click", ()=>{
      path.push(name);
      render();
    });
    foldersList.appendChild(div);
  }
  el("foldersEmpty").style.display = folderShown ? "none" : "block";

  // memos
  el("memosPanel").style.display = CONFIG.showMemosOnTop ? "block" : "none";
  if(CONFIG.showMemosOnTop){
    const memos = Object.values(node.memos)
      .sort((a,b)=>(b.updatedAt||0)-(a.updatedAt||0));
    const memosList = el("memosList");
    memosList.innerHTML = "";
    let memoShown = 0;

    for(const m of memos){
      const t = (m.title||"").toLowerCase();
      const x = (m.text||"").toLowerCase();
      if(q && !(t.includes(q) || x.includes(q))) continue;
      memoShown++;

      const preview = (m.text||"").replace(/\s+/g," ").slice(0,30);
      const div = document.createElement("div");
      div.className = "item";
      div.innerHTML = `
        <div class="left" style="min-width:0">
          <div class="ico">ğŸ“</div>
          <div style="min-width:0">
            <div class="name" title="${escapeHtml(m.title||"(ç„¡é¡Œ)")}">${escapeHtml(m.title||"(ç„¡é¡Œ)")}</div>
            <div class="hint" style="margin-top:2px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; max-width:52vw;">
              ${escapeHtml(preview)}
            </div>
          </div>
        </div>
        <div class="meta">
        <span>${(m.text||"").length}${t("å­—")}</span>
          <span class="arrow">â€º</span>
        </div>
      `;
      div.addEventListener("click", ()=>openEditor(m.id));
      memosList.appendChild(div);
    }
    el("memosEmpty").style.display = memoShown ? "none" : "block";
  }
}

function hasHitInFolder(node, q){
  for(const id in node.memos){
    const m = node.memos[id];
    const t = (m.title||"").toLowerCase();
    const x = (m.text||"").toLowerCase();
    if(t.includes(q) || x.includes(q)) return true;
  }
  for(const name in node.folders){
    if(hasHitInFolder(node.folders[name], q)) return true;
  }
  return false;
}

function escapeHtml(s){
  return (s??"").replace(/[&<>"']/g, c=>({ "&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#39;" }[c]));
}

/** ========= æ“ä½œ ========= */
function goUp(){
  if(path.length>0){ path.pop(); render(); }
}
function addFolder(){
  const name = prompt(t("ãƒ•ã‚©ãƒ«ãƒ€å"));
  if(!name) return;
  const node = getNode();
  if(node.folders[name]){ alert(t("åŒåãƒ•ã‚©ãƒ«ãƒ€ãŒã‚ã‚Šã¾ã™")); return; }
  node.folders[name] = newNode();
  persist();
  render();
}
function addMemo(){
  const node = getNode();
  const id = uid();
  node.memos[id] = { id, title:"", text:"", updatedAt: now() };
  persist();
  openEditor(id);
}
function renameCurrentFolder(){
  if(path.length===0){ alert(t("ãƒ›ãƒ¼ãƒ ã¯å¤‰æ›´ã§ãã¾ã›ã‚“")); return; }
  const parent = getParentNode();
  const old = path[path.length-1];
  const nu = prompt(t("æ–°ã—ã„ãƒ•ã‚©ãƒ«ãƒ€å"), old);
  if(!nu || nu===old) return;
  if(parent.folders[nu]){ alert(t("åŒåãƒ•ã‚©ãƒ«ãƒ€ãŒã‚ã‚Šã¾ã™")); return; }
  parent.folders[nu] = parent.folders[old];
  delete parent.folders[old];
  path[path.length-1] = nu;
  persist();
  render();
}
function deleteCurrentFolder(){
  if(path.length===0){ alert(t("ãƒ›ãƒ¼ãƒ ã¯å‰Šé™¤ã§ãã¾ã›ã‚“")); return; }
  const parent = getParentNode();
  const name = path[path.length-1];
  const ok = confirm(`${t("å‰Šé™¤ã—ã¾ã™ã‹?")}ã€Œ${name}ã€`);
  if(!ok) return;
  delete parent.folders[name];
  path.pop();
  persist();
  render();
}

/** ========= Editor ========= */
function openEditor(id){
  editingId = id;
  const node = getNode();
  const m = node.memos[id];
if(!m){ alert(t("ãƒ¡ãƒ¢ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“")); return; }
  
  el("titleInput").value = m.title || "";
  el("bodyInput").value = m.text || "";
  updateCharCount();

  el("editorView").style.display = "flex";

  // autosave
  clearInterval(autosaveTimer);
  autosaveTimer = setInterval(()=>saveMemo(true), CONFIG.autosaveMs);
  // focus
  setTimeout(()=>el("bodyInput").focus(), 60);
}
function closeEditor(){
  saveMemo(true);
  clearInterval(autosaveTimer);
  autosaveTimer = null;
  el("editorView").style.display = "none";
  editingId = null;
  render();
}
function updateCharCount(){
  el("charCount").textContent = "æ–‡å­—æ•° " + (el("bodyInput").value || "").length;
}
function saveMemo(silent=false){
  if(!editingId) return;
  const node = getNode();
  const m = node.memos[editingId];
  if(!m) return;

  m.title = el("titleInput").value || "";
  m.text  = el("bodyInput").value || "";
  m.updatedAt = now();

  persist();
  if(!silent) render();
}

/** ========= bind ========= */
/** ========= bind ========= */
el("backBtn")?.addEventListener("click", goUp);
el("addFolderBtn")?.addEventListener("click", addFolder);
el("addMemoBtn")?.addEventListener("click", addMemo);
el("renameFolderBtn")?.addEventListener("click", renameCurrentFolder);
el("deleteFolderBtn")?.addEventListener("click", deleteCurrentFolder);

el("closeEditorBtn")?.addEventListener("click", closeEditor);
el("saveBtn")?.addEventListener("click", ()=>saveMemo(false));
el("qInput")?.addEventListener("input", ()=>render());
el("bodyInput")?.addEventListener("input", updateCharCount);

// ã¤ã„ã§ï¼šæ¤œç´¢ãƒœã‚¿ãƒ³ã¯å…ƒã‹ã‚‰ä½•ã‚‚ã—ã¦ãªã„ã®ã§ã€æŠ¼ã—ãŸã‚‰æ¤œç´¢æ¬„ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã•ã›ã¨ã
el("searchBtn")?.addEventListener("click", ()=>el("qInput")?.focus());

render();
  
  // ä¸€è¦§ã®ã€Œæ–‡å­—ã€ã€Œå­—ã€ç­‰ã€JSæç”»ã«ã‚‚å½±éŸ¿ã•ã›ã‚‹ãªã‚‰å†æç”»
}
if(el("modeBtn")) el("modeBtn").addEventListener("click", toggleMode);
renderModeBtn();
applyDict();
  
render();

  /** ========= ãƒ¢ãƒ¼ãƒ‰ & è¾æ›¸ ========= */
const MODE_KEY = "memoTree_mode_kouki";
let koukiMode = localStorage.getItem(MODE_KEY) === "1";
  DICT_KOUKI["å­—"] = "g"; // â†ã“ã“ã¯å¥½ã¿ã§ã€‚ã€Œå­—ã€â†’ã€Œgã€ã ã¨è»½ãã¦å¥½ã
// ã‚‚ã—ãã¯
DICT_KOUKI["å­—"] = "é‡é‡";
const DICT_NORMAL = {
  // ã“ã“ã¯å¿…è¦ãªã‚‰å…¥ã‚Œã‚‹ï¼ˆé€šå¸¸æ™‚ã®è¡¨è¨˜ã‚’å¤‰ãˆãŸã„å ´åˆã®ã¿ï¼‰
};

const DICT_KOUKI = {
  // â‘  å…±é€šUI
  "ãƒ›ãƒ¼ãƒ ":"ãƒ›ãƒ¼ãƒ ",
  "ä¿å­˜":"å‡¦ç†å®Œäº†",
  "æˆ»ã‚‹":"ä¸€æ—¦å¼•ã",
  "é–‰ã˜ã‚‹":"æ’¤å",
  "æ¤œç´¢":"ç´¢æ•µ",
  "ãƒ•ã‚©ãƒ«ãƒ€åå¤‰æ›´":"ç²ç‰©åå¤‰æ›´",
  "ãƒ•ã‚©ãƒ«ãƒ€å‰Šé™¤":"å± ã‚‹",
  "ãƒ•ã‚©ãƒ«ãƒ€":"ç²ç‰©",
  "ãƒ¡ãƒ¢":"è‚‰",
  "ãƒ•ã‚©ãƒ«ãƒ€ãªã—":"ä»•å…¥ã‚Œå‰",
  "ãƒ¡ãƒ¢ãªã—":"è…¹ãŒæ¸›ã£ãŸ",
  "ï¼‹ãƒ¡ãƒ¢":"ï¼‹è§£ä½“",
  "ï¼‹ğŸ“":"ï¼‹ä»•ç•™ã‚ã‚‹",

  // editor
  "æ–‡å­—æ•°":"é‡é‡",
  "ã‚¿ã‚¤ãƒˆãƒ«":"å‘³ä»˜ã‘",
  "ã“ã“ã«æœ¬æ–‡ã‚’æ›¸ãã€‚":"è§£ä½“ã‚·ãƒ§ãƒ¼ã®å§‹ã¾ã‚Šã ",

  // æ¤œç´¢è£œåŠ©
  "ã‚¿ã‚¤ãƒˆãƒ«/æœ¬æ–‡ã®ä¸€éƒ¨ï¼ˆä»»æ„ï¼‰":"ç´¢æ•µï¼ˆä»»æ„ï¼‰",

  // è¿½åŠ ã§å¿…è¦ã«ãªã‚ŠãŒã¡ãªã‚„ã¤
  "(ç„¡é¡Œ)":"(ç„¡é¡Œ)",

  // B ãƒªãƒãƒ¼ãƒ 
  "åå‰ã‚’å¤‰æ›´":"é¢¨å‘³ã®èª¿æ•´",
  "åå‰ã‚’å¤‰æ›´ã—ã¾ã—ãŸ":"å‘³ã‚’èª¿æ•´ã—ãŸ",

  // C ç«¶åˆ/ä¸Šæ›¸ã
  "ä¸Šæ›¸ãã—ã¾ã—ãŸ":"ä»•è¾¼ã¿å®Œäº†ã ",
  "å¤‰æ›´ãŒç«¶åˆã—ã¦ã„ã¾ã™":"ã‚ªãƒ¼ãƒ€ãƒ¼ãŒè¢«ã£ãŸ",

  // D è‡ªå‹•ä¿å­˜ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼ˆå¿…è¦ãªã‚‰è¡¨ç¤ºã™ã‚‹æ™‚ç”¨ï¼‰
  "è‡ªå‹•ä¿å­˜ä¸­":"è§£ä½“ã®é‚ªé­”ã‚’ã™ã‚‹ãª",
  "è‡ªå‹•ä¿å­˜å®Œäº†":"å¯ã‹ã›ã¦é¦´æŸ“ã¾ã›ã‚‹",

  // â‘¤ ãƒ€ã‚¤ã‚¢ãƒ­ã‚°é¡ï¼ˆã‚ãªãŸã®æ¯’è¾æ›¸ã¯å¾Œã§ã“ã“ã«è¶³ã—ã¦OKï¼‰
  "åŒåãƒ•ã‚©ãƒ«ãƒ€ãŒã‚ã‚Šã¾ã™":"åŒã˜ç²ç‰©ã¯è¦ã‚‰ã­ãˆ",
  "ãƒ›ãƒ¼ãƒ ã¯å¤‰æ›´ã§ãã¾ã›ã‚“":"ã“ã“ã¯å‹•ã‹ã›ã­ãˆ",
  "ãƒ›ãƒ¼ãƒ ã¯å‰Šé™¤ã§ãã¾ã›ã‚“":"ã“ã“ã¯å± ã‚Œã­ãˆ",
  "ãƒ¡ãƒ¢ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“":"æ¯’ã®ç—•è·¡ãŒãªã„"
};

function dict(){
  return koukiMode ? DICT_KOUKI : DICT_NORMAL;
}
function t(s){
  const d = dict();
  return d[s] ?? s;
}

// data-i18n ã¨ data-phï¼ˆplaceholderï¼‰ ã‚’ä¸€æ‹¬åæ˜ 
function applyDict(){
  document.querySelectorAll("[data-i18n]").forEach(el=>{
    const key = el.getAttribute("data-i18n");
    el.textContent = t(key);
  });
  document.querySelectorAll("[data-ph]").forEach(el=>{
    const key = el.getAttribute("data-ph");
    el.setAttribute("placeholder", t(key));
  });
  // ã‚¿ã‚¤ãƒˆãƒ«ã‚„ tooltip ã‚‚å¿…è¦ãªã‚‰ã“ã“ã§
}


  
</script>
</body>
</html>
